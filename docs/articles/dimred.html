<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Use FactoMineR for dimension reduction â€¢ sfutils</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Use FactoMineR for dimension reduction">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sfutils</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../TODO.html">To do</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    See also
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="http://notyetalink.com">FinTxtAPI package</a>
    </li>
    <li>
      <a href="http://notyetalink.com">FinTxtShiny package</a>
    </li>
    <li>
      <a href="https://hub.docker.com/r/jhginn/fintxtdocker/">FinTxtDocker image</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Useful links
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/cortical-io/retina-sdk.py">Python retinasdk module</a>
    </li>
    <li>
      <a href="http://api.cortical.io">Cortical API tool</a>
    </li>
    <li>
      <a href="http://documentation.cortical.io/the_power_of_expressions.html">Retina API documentation</a>
    </li>
    <li>
      <a href="http://www.cortical.io/static/downloads/semantic-folding-theory-white-paper.pdf">Semantic folding whitepaper</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://www.cortical.io">Cortical.io</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../mailto:jasperginn@gmail.com">
    <span class="fa fa-envelope"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/JasperHG90/sfutils">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://fintxt.slack.com/messages/CAAUEHK6X/details/">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Use FactoMineR for dimension reduction</h1>
                        <h4 class="author">Jasper Ginn</h4>
            
            <h4 class="date">2018-05-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/JasperHG90/sfutils.git/blob/master/vignettes/dimred.Rmd"><code>vignettes/dimred.Rmd</code></a></small>
      <div class="hidden name"><code>dimred.Rmd</code></div>

    </div>

    
    
<p>Because the retina returns binary values in a finite space (16384 positions), doing computations is more efficient than many other methods. However, the more documents you have, the more expensive computation becomes, especially if you want to compare documents to one another.</p>
<p>Fortunately, we can reduce the number of dimensions of the retina dramatically while retaining sensible results. This vignette shows how this can be done.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">suppressPackageStartupMessages</span>(<span class="kw">library</span>(sfutils))
<span class="co"># Load data</span>
<span class="kw">data</span>(<span class="st">"SAP500"</span>)</code></pre></div>
<p>We will make a subset of this data (65 companies) for the purposes of this document:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Choose these companies</span>
chosen &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">16</span>, <span class="dv">17</span>, 
            <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">31</span>, <span class="dv">32</span>, <span class="dv">33</span>, 
            <span class="dv">35</span>, <span class="dv">57</span>, <span class="dv">61</span>, <span class="dv">60</span>, <span class="dv">62</span>, <span class="dv">69</span>, <span class="dv">74</span>, <span class="dv">81</span>, 
            <span class="dv">90</span>, <span class="dv">93</span>, <span class="dv">119</span>, <span class="dv">126</span>, <span class="dv">135</span>, <span class="dv">141</span>, <span class="dv">149</span>, 
            <span class="dv">151</span>, <span class="dv">160</span>, <span class="dv">174</span>, <span class="dv">184</span>, <span class="dv">192</span>, <span class="dv">222</span>, <span class="dv">232</span>, 
            <span class="dv">269</span>, <span class="dv">282</span>, <span class="dv">309</span>, <span class="dv">326</span>, <span class="dv">335</span>, <span class="dv">344</span>, <span class="dv">348</span>, 
            <span class="dv">349</span>, <span class="dv">359</span>, <span class="dv">365</span>, <span class="dv">384</span>, <span class="dv">391</span>, <span class="dv">400</span>, <span class="dv">401</span>, 
            <span class="dv">416</span>, <span class="dv">428</span>, <span class="dv">432</span>, <span class="dv">443</span>, <span class="dv">445</span>, <span class="dv">451</span>, <span class="dv">464</span>, 
            <span class="dv">474</span>, <span class="dv">482</span>, <span class="dv">493</span>, <span class="dv">500</span>, <span class="dv">504</span>)
<span class="co"># Subset</span>
subs &lt;-<span class="st"> </span>SAP500[chosen]
<span class="kw">names</span>(subs)
<span class="co">#&gt;  [1] "Booking Holdings Inc"            "Amazon.com Inc"                 </span>
<span class="co">#&gt;  [3] "Alphabet Inc"                    "BlackRock Inc"                  </span>
<span class="co">#&gt;  [5] "Chipotle Mexican Grill Inc"      "Boeing Co (BA.N)"               </span>
<span class="co">#&gt;  [7] "Netflix Inc"                     "Lockheed Martin Corp"           </span>
<span class="co">#&gt;  [9] "SVB Financial Group"             "Regeneron Pharmaceuticals Inc"  </span>
<span class="co">#&gt; [11] "Humana Inc"                      "Biogen Inc"                     </span>
<span class="co">#&gt; [13] "FedEx Corp"                      "NVIDIA Corp"                    </span>
<span class="co">#&gt; [15] "UnitedHealth Group Inc"          "Adobe Systems Inc"              </span>
<span class="co">#&gt; [17] "Goldman Sachs Group Inc (GS.N)"  "Broadcom Inc"                   </span>
<span class="co">#&gt; [19] "Berkshire Hathaway Inc (BRKb.N)" "Apple Inc"                      </span>
<span class="co">#&gt; [21] "Mastercard Inc (MA.N)"           "Facebook Inc (FB.OQ)"           </span>
<span class="co">#&gt; [23] "Aetna Inc"                       "Moody's Corp"                   </span>
<span class="co">#&gt; [25] "McDonald's Corp"                 "Caterpillar Inc"                </span>
<span class="co">#&gt; [27] "Deere &amp; Co (DE.N)"               "Electronic Arts Inc (EA.OQ)"    </span>
<span class="co">#&gt; [29] "Chevron Corp"                    "Johnson &amp; Johnson"              </span>
<span class="co">#&gt; [31] "Dr Pepper Snapple Group Inc"     "Universal Health Services Inc"  </span>
<span class="co">#&gt; [33] "United Parcel Service Inc"       "JPMorgan Chase &amp; Co"            </span>
<span class="co">#&gt; [35] "HCA Healthcare Inc"              "American Express Co"            </span>
<span class="co">#&gt; [37] "Microsoft Corp"                  "Western Digital Corp"           </span>
<span class="co">#&gt; [39] "Walmart Inc"                     "Activision Blizzard Inc"        </span>
<span class="co">#&gt; [41] "Citigroup Inc (C.N)"             "E*TRADE Financial Corp"         </span>
<span class="co">#&gt; [43] "WestRock Co"                     "Kraft Heinz Co"                 </span>
<span class="co">#&gt; [45] "Delta Air Lines Inc"             "Intel Corp"                     </span>
<span class="co">#&gt; [47] "Wells Fargo &amp; Co"                "Morgan Stanley (MS.N)"          </span>
<span class="co">#&gt; [49] "Cardinal Health Inc"             "Oracle Corp"                    </span>
<span class="co">#&gt; [51] "American Airlines Group Inc"     "Coca-Cola Co (KO.N)"            </span>
<span class="co">#&gt; [53] "Harley-Davidson Inc"             "Twenty-First Century Fox Inc"   </span>
<span class="co">#&gt; [55] "Pfizer Inc"                      "Quanta Services Inc"            </span>
<span class="co">#&gt; [57] "AT&amp;T Inc (T.N)"                  "Comcast Corp"                   </span>
<span class="co">#&gt; [59] "Bank of America Corp"            "Viacom Inc"                     </span>
<span class="co">#&gt; [61] "HP Inc"                          "Western Union Co (WU.N)"        </span>
<span class="co">#&gt; [63] "Hewlett Packard Enterprise Co"   "General Electric Co (GE.N)"     </span>
<span class="co">#&gt; [65] "Ford Motor Co (F.N)"</span></code></pre></div>
<p>We fingerprint the descriptions. Given the</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Retrieve only descriptions</span>
desc_only &lt;-<span class="st"> </span><span class="kw">lapply</span>(subs, <span class="cf">function</span>(x) x<span class="op">$</span>desc)

<span class="co"># Fingerprint</span>
fps &lt;-<span class="st"> </span><span class="kw"><a href="../reference/do_fingerprint_document.html">do_fingerprint_document</a></span>(desc_only)

<span class="co"># To matrix</span>
binmat &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(fps)
<span class="kw">rownames</span>(binmat) &lt;-<span class="st"> </span><span class="kw">names</span>(desc_only)

<span class="co"># Distances (need to convert matrix from Matrix package to normal matrix)</span>
fpsdst &lt;-<span class="st"> </span><span class="kw">dist</span>(<span class="kw">as.matrix</span>(binmat))

<span class="co"># Do hierarchical clustering and plot</span>
clust &lt;-<span class="st"> </span><span class="kw">hclust</span>(fpsdst, <span class="dt">method =</span> <span class="st">"ward.D2"</span>)</code></pre></div>
<p><img src="dendro1.png" width="80%/"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Reduce dimensions</span>
<span class="kw">library</span>(FactoMineR)
red &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/FactoMineR/topics/PCA">PCA</a></span>(<span class="kw">as.matrix</span>(binmat),
           <span class="dt">ncp =</span> <span class="kw">ncol</span>(binmat), <span class="dt">graph =</span> <span class="ot">FALSE</span>)

<span class="co"># Predict</span>
pred &lt;-<span class="st"> </span><span class="kw">predict</span>(red, binmat)<span class="op">$</span>coord

<span class="co"># Take 64 dims</span>
pred_filt &lt;-<span class="st"> </span>pred[,<span class="dv">1</span><span class="op">:</span><span class="dv">64</span>]

<span class="co"># As distance</span>
dd &lt;-<span class="st"> </span><span class="kw">dist</span>(pred_filt)

<span class="co"># Cluster</span>
clusts &lt;-<span class="st"> </span><span class="kw">hclust</span>(dd, <span class="dt">method =</span> <span class="st">"ward.D2"</span>)</code></pre></div>
<p><img src="dendro2.png" width="80%/"></p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jasper Ginn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
